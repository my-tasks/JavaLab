DROP IF EXISTS newsdb;

CREATE SCHEMA newsdb;

DROP TABLE NEWS;

CREATE TABLE NEWS(
	NEWS_ID NUMBER, 
	NEWS_TITLE VARCHAR(100) NOT NULL,
	NEWS_BRIEF VARCHAR(500) NOT NULL,
	NEWS_CONTENT VARCHAR(2048) NOT NULL,
	NEWS_DATE DATE NOT NULL,
	PRIMARY KEY (NEWS_ID)
);
DROP SEQUENCE news_s;

CREATE SEQUENCE news_s
	START WITH 1
	INCREMENT BY 1;

CREATE OR REPLACE TRIGGER news_trigger
	BEFORE INSERT ON NEWS
	FOR EACH ROW
	WHEN (NEW.NEWS_ID IS NULL)
	BEGIN
	:NEW.NEWS_ID:=news_s.NEXTVAL;
	END;
  
CREATE OR REPLACE PROCEDURE INSERT_NEWS(
v_title IN NEWS.NEWS_TITLE%TYPE,
v_brief IN NEWS.NEWS_BRIEF%TYPE,
v_content IN NEWS.NEWS_CONTENT%TYPE,
v_created IN NEWS.NEWS_DATE%TYPE,
v_id OUT NEWS.NEWS_ID%TYPE)
AS
BEGIN
INSERT INTO NEWS(NEWS_TITLE, NEWS_BRIEF, NEWS_CONTENT, NEWS_DATE)
VALUES(v_title, v_brief, v_content, v_created)
RETURNING NEWS_ID INTO v_id;
END;
